{% extends "layout.html" %}

{% block title %}
    Search
{% endblock %}

{% block main %}
        <input id="serach-bar" class="request-info" autocomplete="off" autofocus placeholder="Query" type="search">
        <script>
            let input = document.querySelector('input');
            input.addEventListener('keyup', function() {
                $.get('/query?q=' + input.value, function(storage) {
                    let html = '';
                    for (let id in storage) {
                        let name = storage[id].name + " - $" + storage[id].price + " - " +
                        storage[id].units + " " + storage[id].measure_unit + " - " + storage[id].comments
                        html += '<li>' + name + '</li>';
                    }
                    document.querySelector('.query').innerHTML = html;
                });
            });
        </script>
        <ul class="query"></ul>
{% endblock %}
    </body>
</html>